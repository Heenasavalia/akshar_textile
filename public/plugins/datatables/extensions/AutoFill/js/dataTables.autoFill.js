!function(r,y,d){function t(b,g){"use strict";var l=function(t,e){if(!(this instanceof l))throw"Warning: AutoFill must be initialised with the keyword 'new'";if(!b.fn.dataTableExt.fnVersionCheck("1.7.0"))throw"Warning: AutoFill requires DataTables 1.7 or greater";return this.c={},this.s={filler:{height:0,width:0},border:{width:2},drag:{startX:-1,startY:-1,startTd:null,endTd:null,dragging:!1},screen:{interval:null,y:0,height:0,scrollTop:0},scroller:{top:0,bottom:0},columns:[]},this.dom={table:null,filler:null,borderTop:null,borderRight:null,borderBottom:null,borderLeft:null,currentTarget:null},this.fnSettings=function(){return this.s},this._fnInit(t,e),this};return l.prototype={_fnInit:function(t,e){var s=this;this.s.dt=g.Api?new g.Api(t).settings()[0]:t.fnSettings(),this.s.init=e||{},this.dom.table=this.s.dt.nTable,b.extend(!0,this.c,l.defaults,e),this._initColumns();var o,r=b("<div/>",{class:"AutoFill_filler"}).appendTo("body");this.dom.filler=r[0],this.s.filler.height=r.height(),this.s.filler.width=r.width(),r[0].style.display="none";var i=y.body;""!==s.s.dt.oScroll.sY&&(s.s.dt.nTable.parentNode.style.position="relative",i=s.s.dt.nTable.parentNode),o=b("<div/>",{class:"AutoFill_border"}),this.dom.borderTop=o.clone().appendTo(i)[0],this.dom.borderRight=o.clone().appendTo(i)[0],this.dom.borderBottom=o.clone().appendTo(i)[0],this.dom.borderLeft=o.clone().appendTo(i)[0],r.on("mousedown.DTAF",function(t){return this.onselectstart=function(){return!1},s._fnFillerDragStart.call(s,t),!1}),b("tbody",this.dom.table).on("mouseover.DTAF mouseout.DTAF",">tr>td, >tr>th",function(t){s._fnFillerDisplay.call(s,t)}),b(this.dom.table).on("destroy.dt.DTAF",function(){r.off("mousedown.DTAF").remove(),b("tbody",this.dom.table).off("mouseover.DTAF mouseout.DTAF")})},_initColumns:function(){var t,e,s=this,o=this.s.dt,r=this.s.init;for(t=0,e=o.aoColumns.length;t<e;t++)this.s.columns[t]=b.extend(!0,{},l.defaults.column);for(o.oApi._fnApplyColumnDefs(o,r.aoColumnDefs||r.columnDefs,r.aoColumns||r.columns,function(t,e){s._fnColumnOptions(t,e)}),t=0,e=o.aoColumns.length;t<e;t++){var i=this.s.columns[t];i.read||(i.read=this._fnReadCell),i.write||(i.read=this._fnWriteCell),i.step||(i.read=this._fnStep)}},_fnColumnOptions:function(t,s){function e(t,e){s[e[0]]!==d&&(o[t]=s[e[0]]),s[e[1]]!==d&&(o[t]=s[e[1]])}var o=this.s.columns[t];e("enable",["bEnable","enable"]),e("read",["fnRead","read"]),e("write",["fnWrite","write"]),e("step",["fnStep","step"]),e("increment",["bIncrement","increment"])},_fnTargetCoords:function(t){var e=b(t).parents("tr")[0],s=this.s.dt.oInstance.fnGetPosition(t);return{x:b("td",e).index(t),y:b("tr",e.parentNode).index(e),row:s[0],column:s[2]}},_fnUpdateBorder:function(t,e){var s,o=this.s.border.width,r=b(t).offset(),i=b(e).offset(),l=r.left-o,n=i.left+b(e).outerWidth(),d=r.top-o,a=i.top+b(e).outerHeight(),h=i.left+b(e).outerWidth()-r.left+2*o,f=i.top+b(e).outerHeight()-r.top+2*o;if(r.left>i.left&&(l=i.left-o,n=r.left+b(t).outerWidth(),h=r.left+b(t).outerWidth()-i.left+2*o),""!==this.s.dt.oScroll.sY){var c=b(this.s.dt.nTable.parentNode).offset(),p=b(this.s.dt.nTable.parentNode).scrollTop(),u=b(this.s.dt.nTable.parentNode).scrollLeft();l-=c.left-u,n-=c.left-u,d-=c.top-p,a-=c.top-p}(s=this.dom.borderTop.style).top=d+"px",s.left=l+"px",s.height=this.s.border.width+"px",s.width=h+"px",(s=this.dom.borderBottom.style).top=a+"px",s.left=l+"px",s.height=this.s.border.width+"px",s.width=h+"px",(s=this.dom.borderLeft.style).top=d+"px",s.left=l+"px",s.height=f+"px",s.width=this.s.border.width+"px",(s=this.dom.borderRight.style).top=d+"px",s.left=n+"px",s.height=f+"px",s.width=this.s.border.width+"px"},_fnFillerDragStart:function(t){var s=this,e=this.dom.currentTarget;this.s.drag.dragging=!0,s.dom.borderTop.style.display="block",s.dom.borderRight.style.display="block",s.dom.borderBottom.style.display="block",s.dom.borderLeft.style.display="block";var o=this._fnTargetCoords(e);this.s.drag.startX=o.x,this.s.drag.startY=o.y,this.s.drag.startTd=e,this.s.drag.endTd=e,this._fnUpdateBorder(e,e),b(y).bind("mousemove.AutoFill",function(t){s._fnFillerDragMove.call(s,t)}),b(y).bind("mouseup.AutoFill",function(t){s._fnFillerFinish.call(s,t)}),this.s.screen.y=t.pageY,this.s.screen.height=b(r).height(),this.s.screen.scrollTop=b(y).scrollTop(),""!==this.s.dt.oScroll.sY&&(this.s.scroller.top=b(this.s.dt.nTable.parentNode).offset().top,this.s.scroller.bottom=this.s.scroller.top+b(this.s.dt.nTable.parentNode).height()),this.s.screen.interval=setInterval(function(){var t=b(y).scrollTop(),e=t-s.s.screen.scrollTop;s.s.screen.y+=e,s.s.screen.height-s.s.screen.y+t<50?b("html, body").animate({scrollTop:t+50},240,"linear"):s.s.screen.y-t<50&&b("html, body").animate({scrollTop:t-50},240,"linear"),""!==s.s.dt.oScroll.sY&&(s.s.screen.y>s.s.scroller.bottom-50?b(s.s.dt.nTable.parentNode).animate({scrollTop:b(s.s.dt.nTable.parentNode).scrollTop()+50},240,"linear"):s.s.screen.y<s.s.scroller.top+50&&b(s.s.dt.nTable.parentNode).animate({scrollTop:b(s.s.dt.nTable.parentNode).scrollTop()-50},240,"linear"))},250)},_fnFillerDragMove:function(t){if(t.target&&"TD"==t.target.nodeName.toUpperCase()&&t.target!=this.s.drag.endTd){var e=this._fnTargetCoords(t.target);"y"==this.c.mode&&e.x!=this.s.drag.startX&&(t.target=b("tbody>tr:eq("+e.y+")>td:eq("+this.s.drag.startX+")",this.dom.table)[0]),"x"==this.c.mode&&e.y!=this.s.drag.startY&&(t.target=b("tbody>tr:eq("+this.s.drag.startY+")>td:eq("+e.x+")",this.dom.table)[0]),"either"==this.c.mode&&(e.x!=this.s.drag.startX?t.target=b("tbody>tr:eq("+this.s.drag.startY+")>td:eq("+e.x+")",this.dom.table)[0]:e.y!=this.s.drag.startY&&(t.target=b("tbody>tr:eq("+e.y+")>td:eq("+this.s.drag.startX+")",this.dom.table)[0])),"both"!==this.c.mode&&(e=this._fnTargetCoords(t.target));var s=this.s.drag;s.endTd=t.target,e.y>=this.s.drag.startY?this._fnUpdateBorder(s.startTd,s.endTd):this._fnUpdateBorder(s.endTd,s.startTd),this._fnFillerPosition(t.target)}this.s.screen.y=t.pageY,this.s.screen.scrollTop=b(y).scrollTop(),""!==this.s.dt.oScroll.sY&&(this.s.scroller.scrollTop=b(this.s.dt.nTable.parentNode).scrollTop(),this.s.scroller.top=b(this.s.dt.nTable.parentNode).offset().top,this.s.scroller.bottom=this.s.scroller.top+b(this.s.dt.nTable.parentNode).height())},_fnFillerFinish:function(t){var e,s,o,r=this;b(y).unbind("mousemove.AutoFill mouseup.AutoFill"),this.dom.borderTop.style.display="none",this.dom.borderRight.style.display="none",this.dom.borderBottom.style.display="none",this.dom.borderLeft.style.display="none",this.s.drag.dragging=!1,clearInterval(this.s.screen.interval);function i(t){return r.s.dt.oApi._fnVisibleToColumnIndex(r.s.dt,t)}var l=[],n=this.dom.table,d=this._fnTargetCoords(this.s.drag.startTd),a=this._fnTargetCoords(this.s.drag.endTd);if(d.y<=a.y)for(e=d.y;e<=a.y;e++)if(d.x<=a.x)for(o=d.x;o<=a.x;o++)l.push({node:b("tbody>tr:eq("+e+")>td:eq("+o+")",n)[0],x:o-d.x,y:e-d.y,colIdx:i(o)});else for(o=d.x;o>=a.x;o--)l.push({node:b("tbody>tr:eq("+e+")>td:eq("+o+")",n)[0],x:o-d.x,y:e-d.y,colIdx:i(o)});else for(e=d.y;e>=a.y;e--)if(d.x<=a.x)for(o=d.x;o<=a.x;o++)l.push({node:b("tbody>tr:eq("+e+")>td:eq("+o+")",n)[0],x:o-d.x,y:e-d.y,colIdx:i(o)});else for(o=d.x;o>=a.x;o--)l.push({node:b("tbody>tr:eq("+e+")>td:eq("+o+")",n)[0],x:d.x-o,y:d.y-e,colIdx:i(o)});if(!(l.length<=1)){var h,f=[];for(e=0,s=l.length;e<s;e++){var c=l[e],p=this.s.columns[c.colIdx],u=p.read.call(p,c.node),m=p.step.call(p,c.node,u,h,e,c.x,c.y);p.write.call(p,c.node,m),h=m,f.push({cell:c,colIdx:c.colIdx,newValue:m,oldValue:u})}null!==this.c.complete&&this.c.complete.call(this,f),g.Api?new g.Api(this.s.dt).draw(!1):this.s.dt.oInstance.fnDraw()}},_fnFillerDisplay:function(t){var e=this.dom.filler;if(!this.s.drag.dragging){var s="td"==t.target.nodeName.toLowerCase()?t.target:b(t.target).parents("td")[0],o=this._fnTargetCoords(s).column;this.s.columns[o].enable?"mouseover"==t.type?(this.dom.currentTarget=s,this._fnFillerPosition(s),e.style.display="block"):t.relatedTarget&&t.relatedTarget.className.match(/AutoFill/)||(e.style.display="none"):e.style.display="none"}},_fnFillerPosition:function(t){var e=b(t).offset(),s=this.dom.filler;s.style.top=e.top-this.s.filler.height/2-1+b(t).outerHeight()+"px",s.style.left=e.left-this.s.filler.width/2-1+b(t).outerWidth()+"px"}},g.AutoFill=l,(g.AutoFill=l).version="1.2.1",l.defaults={mode:"y",complete:null,column:{enable:!0,increment:!0,read:function(t){return b(t).html()},write:function(t,e){var s=b(t).parents("table");if(g.Api)s.DataTable().cell(t).data(e);else{var o=s.dataTable(),r=o.fnGetPosition(t);o.fnUpdate(e,r[0],r[2],!1)}},step:function(t,e,s,o,r,i){var l=/(\-?\d+)/,n=this.increment&&s?s.match(l):null;return n?s.replace(l,parseInt(n[1],10)+(r<0||i<0?-1:1)):s===d?e:s}}},l}"function"==typeof define&&define.amd?define(["jquery","datatables"],t):"object"==typeof exports?t(require("jquery"),require("datatables")):jQuery&&!jQuery.fn.dataTable.AutoFill&&t(jQuery,jQuery.fn.dataTable)}(window,document);